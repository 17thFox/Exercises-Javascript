<!DOCTYPE html>
<html>
<head>
<style type="text/css">
ul {
  list-style-type: none;
}

li{
	margin: 0 0 5px 0;
}

</style>
</head>

<body>

<h1>Hello World!</h1>

<form id="mySearchForm">
	<input type="text" id="searchInput" name="example" placeholder="ex. Narnia...">
	<input type="submit" value="Search">
</form>



<div id="container">
    <h3 class="results">Your total results will show here!</h3>
    <ul class = "movie_details">
    </ul>
</div>

</body>

<script src="https://code.jquery.com/jquery-3.1.1.js" integrity="sha256-16cdPddA6VdVInumRGo6IbivbERE8p7CQR3HzTBuELA=" crossorigin="anonymous"></script>

<script type="text/javascript" src="js/index.js"></script>

<script>

$Container = $('#container');
$Movies = $(".movie_details");
$Movies.hide();

$("#mySearchForm").on('submit', function (event){
	event.preventDefault();
	var mySearchInput = this[0].value;
	// this is an array containing all the forms' inputs.
	if (mySearchInput.length < 3){
	 	$Container.find('.results').text('You must enter at least 3 letters!').css('color', 'red');
	}
	else{
		$.ajax({
		  method: "POST",
		  url: "/search/movie/",
		  data: {movie: mySearchInput},
		})
		 .done(function (data){
		 	var myLength = data.length;
		 	$Container.find('.results').text('You recieved: ' + myLength + ' results.').css('color', 'black');

			for(var i = 0; i < myLength; i++){
				console.log(data[i].Title);	
			 	$Movies.append(
		          "<li>" + data[i].Title + " (" + data[i].Year + ")  (" + data[i].Type + ")  " +
		          "<img src=" + data[i].Poster + " height = '100' /> </li>" 
		        )
		 	}
		 	$Movies.show();
		 });
	 }
});

</script>
</html>	